module.exports=[76188,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=()=>(0,b.jsxs)("div",{className:"hidden md:flex w-3/5 flex-col justify-center px-16",children:[(0,b.jsxs)("div",{className:"mb-10",children:[(0,b.jsxs)("h2",{className:"text-4xl font-bold text-secondary leading-tight",children:["Grow Your Business",(0,b.jsx)("br",{}),"With Confidence"]}),(0,b.jsx)("p",{className:"text-gray-600 text-lg mt-4",children:"Smart tools that help your shop grow every day."})]}),(0,b.jsx)("img",{src:"/sign-up.svg",alt:"Signup Illustration",className:"w-4/5 max-w-xl drop-shadow-md"})]});var e=a.i(38246),f=a.i(3130),g=a.i(50944);a.i(12180);var h=a.i(12530),i=a.i(73140),j=a.i(77156),k=a.i(41379),l=a.i(18685),m=a.i(40695),n=a.i(5522),o=a.i(23292),p=a.i(88466);let q=(0,h.observer)(({setStep:a})=>{let{userStore:d}=(0,i.useStore)(),[e,f]=(0,c.useState)(!1),[h,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)({}),[t,u]=(0,c.useState)({name:"",email:"",password:"",confirmPassword:""});(0,g.useRouter)();let v=a=>{let{name:b,value:c}=a.target;u(a=>({...a,[b]:c})),r[b]&&s(a=>({...a,[b]:""}))},w=async b=>{let c;b.preventDefault();let e=(c={},t.name.trim()||(c.name="Name is required"),t.email.trim()||(c.email="Email is required"),t.email.includes("@")||(c.email="Invalid email"),t.password.length<6&&(c.password="Password must be 6+ characters"),t.password!==t.confirmPassword&&(c.confirmPassword="Passwords do not match"),c);if(Object.keys(e).length>0)return void s(e);let{confirmPassword:f,...g}=t;(await d.userSignup({...g,checkOnly:!0}),"User already exists"===d.error||(await d.requestOtp(t.email,"signup"),d.error||(await d.waitForOtp(),await d.userSignup(g),d.error)))?o.toast.error(d.error):(u({name:"",email:"",password:"",confirmPassword:""}),localStorage.setItem("signupStep",2),a(2))};return(0,b.jsx)("form",{action:"",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Full Name"}),(0,b.jsx)(n.Input,{type:"text",name:"name",placeholder:"Your name",value:t.name,onChange:v,className:r.name?"border-red-500":"border-border"}),r.name&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"})," ",r.name]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Email"}),(0,b.jsx)(n.Input,{type:"email",name:"email",placeholder:"your@email.com",value:t.email,onChange:v,className:r.email?"border-red-500":"border-border"}),r.email&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"})," ",r.email]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Input,{type:e?"text":"password",name:"password",placeholder:"Minimum 6 characters",value:t.password,onChange:v,className:r.password?"border-red-500 pr-10":"border-border pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>f(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:e?(0,b.jsx)(k.EyeOff,{size:18}):(0,b.jsx)(j.Eye,{size:18})})]}),r.password&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"})," ",r.password]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Confirm Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Input,{type:h?"text":"password",name:"confirmPassword",placeholder:"Re-enter password",value:t.confirmPassword,onChange:v,className:r.confirmPassword?"border-red-500 pr-10":"border-border pr-10"}),(0,b.jsx)("button",{type:"button",onClick:()=>q(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800",children:h?(0,b.jsx)(k.EyeOff,{size:18}):(0,b.jsx)(j.Eye,{size:18})})]}),r.confirmPassword&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"})," ",r.confirmPassword]})]}),(0,b.jsx)(m.Button,{onClick:w,disabled:d.loading,className:"w-full mt-6 text-white hover:cursor-pointer",children:d.loading?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Spinner,{}),"Processing..."]}):"Continue"})]})})});var r=a.i(87682);let s=[{value:"grocery",label:"Grocery"},{value:"salon",label:"Salon"},{value:"cafe & restaurant",label:"Cafe & Restaurant"},{value:"bakery",label:"Bakery"},{value:"clothing",label:"Clothing Store"},{value:"electronics",label:"Electronics"},{value:"gym",label:"Gym / Fitness"},{value:"pharmacy",label:"Pharmacy"},{value:"other",label:"Other"}],t=(0,h.observer)(({setStep:a})=>{let{userStore:d,shopStore:e}=(0,i.useStore)(),[f,h]=(0,c.useState)({}),[j,k]=(0,c.useState)({shopName:"",phone:"",upiId:"",businessType:"",customBusinessType:"",address:"",minAmount:"",targetStamp:"",reward:""}),q=(0,g.useRouter)(),t=a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c})),f[b]&&h(a=>({...a,[b]:""}))},u=async b=>{var c,f;let g;b.preventDefault();let i=(g={},j.shopName.trim()||(g.shopName="Shopname is required"),j.phone.trim()||(g.phone="Phone is required"),j.upiId.trim()||(g.upiId="UpiId is required"),j.businessType.trim()||(g.businessType="Business type is required"),"other"!=j.businessType||j.customBusinessType.trim()||(g.customBusinessType="Custom business type is required"),j.address.trim()||(g.address="Address is required"),j.minAmount.trim()||(g.minAmount="Minimum amount is required"),j.minAmount.trim().length>0&&(c=j.minAmount,!/^[0-9]+$/.test(c))&&(g.minAmount="Plaese enter valid minimum amount"),j.targetStamp.trim()||(g.targetStamp="Target stamp is required"),j.targetStamp.trim().length>0&&(f=j.targetStamp,!/^[0-9]+$/.test(f))&&(g.minAmount="Plaese enter valid target stamp."),j.reward.trim()||(g.reward="Reward is required"),g);if(Object.keys(i).length>0)return void h(i);let l={...j};if("other"===j.businessType&&(l.businessType=j.customBusinessType),delete l.customBusinessType,!d.user?.email){o.toast.error("User not exist."),a(1),localStorage.setItem("signupStep",1);return}(l.ownerId=d.user.email,await e.createShop(l),e.error)?"Shop already exists for this user."==e.error?o.toast.error(e.error,{description:"Click the button to login.",action:{label:"Login",onClick:()=>q.push("/login")}}):o.toast.error(e.error):(k({shopName:"",phone:"",businessType:"",customBusinessType:"",address:"",minAmount:"",targetStamp:"",reward:""}),q.push("/plans"),localStorage.removeItem("signupStep"))};return(0,b.jsx)("form",{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Shop Name"}),(0,b.jsx)(n.Input,{type:"text",name:"shopName",placeholder:"Your shop name",value:j.shopName,onChange:t,className:f.shopName?"border-red-500":"border-border"}),f.shopName&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.shopName]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Phone"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"+91"}),(0,b.jsx)(n.Input,{type:"text",name:"phone",placeholder:"XXXXX XXXXX",maxLength:10,value:j.phone,onChange:t,className:`pl-12 ${f.phone?"border-red-500":"border-border"}`})]}),f.phone&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.phone]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Upi Id"}),(0,b.jsx)(n.Input,{type:"text",name:"upiId",placeholder:"Your upi id",value:j.upiId,onChange:t,className:f.upiId?"border-red-500":"border-border"}),f.upiId&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.upiId]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Business Type"}),(0,b.jsxs)(r.Select,{value:j.businessType,onValueChange:a=>{k({...j,businessType:a}),f.businessType&&h(a=>({...a,businessType:""})),"other"!==a&&(k(a=>({...a,customBusinessType:""})),f.customBusinessType&&h(a=>({...a,customBusinessType:""})))},children:[(0,b.jsx)(r.SelectTrigger,{className:`${f.businessType?"border-red-500":"border-border"} w-full `,children:(0,b.jsx)(r.SelectValue,{placeholder:"Select business type"})}),(0,b.jsx)(r.SelectContent,{children:s.map(a=>(0,b.jsx)(r.SelectItem,{value:a.value,children:a.label},a.value))})]}),f.businessType&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.businessType]}),"other"===j.businessType&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)(n.Input,{name:"customBusinessType",placeholder:"Enter your business type",value:j.customBusinessType,onChange:t,className:f.customBusinessType?"border-red-500":"border-border"}),f.customBusinessType&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.customBusinessType]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Shop Address"}),(0,b.jsx)(n.Input,{type:"text",name:"address",placeholder:"Shop full address",value:j.address,onChange:t,className:f.address?"border-red-500":"border-border"}),f.address&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.address]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Minimum Amount For A Stamp"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"â‚¹"}),(0,b.jsx)(n.Input,{type:"number",name:"minAmount",placeholder:"0",value:j.minAmount,onChange:t,className:`pl-8 ${f.minAmount?"border-red-500":"border-border"}`})]}),f.minAmount&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.minAmount]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Stamps Required for Reward"}),(0,b.jsx)(n.Input,{type:"number",name:"targetStamp",placeholder:"Enter target stamp",value:j.targetStamp,onChange:t,className:f.targetStamp?"border-red-500":"border-border"}),f.targetStamp&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.targetStamp]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-primary mb-2",children:"Reward"}),(0,b.jsx)(n.Input,{type:"text",name:"reward",placeholder:"e.g., Free Coffee",value:j.reward,onChange:t,className:f.reward?"border-red-500":"border-border"}),f.reward&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1 flex gap-2 items-center",children:[(0,b.jsx)(l.TriangleAlert,{className:"h-3 w-3"}),f.reward]})]}),(0,b.jsx)(m.Button,{onClick:u,className:"w-full hover:cursor-pointer text-white",disabled:e.loading,children:e.loading?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Spinner,{}),"Processing..."]}):"Continue"})]})})}),u=(0,h.observer)(()=>{let{userStore:a}=(0,i.useStore)(),[d,h]=(0,c.useState)(1);return(0,g.useRouter)(),(0,c.useEffect)(()=>{localStorage.getItem("signupStep")&&h(localStorage.getItem("signupStep")),a.user||localStorage.removeItem("signupStep")},[]),(0,b.jsx)("div",{className:"flex w-full md:w-2/5 items-center justify-center p-4 h-screen overflow-y-hidden",children:(0,b.jsx)(f.Card,{className:"w-full max-w-md shadow-lg border-blue-100 p-0 h-[90%] overflow-y-auto no-scrollbar",children:(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-secondary mb-2",children:1==d?"Create Account":"Enter Shop Details"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:1==d?"Join thousands of shopkeepers managing loyalty":"Provide your shop information to continue."}),2==d&&a.user&&(0,b.jsxs)("p",{className:"text-muted-foreground text-xs",children:["Your email: ",(0,b.jsx)("span",{className:"text-primary",children:a.user?.email})]})]}),(0,b.jsx)("div",{className:"flex gap-2 mb-7",children:[1,2].map(a=>(0,b.jsx)("div",{className:`h-1 flex-1 rounded-full transition-colors ${a<=d?"bg-secondary":"bg-gray-200"}`},a))}),(0,b.jsx)("div",{children:1==d?(0,b.jsx)(q,{setStep:h}):(0,b.jsx)(t,{setStep:h})}),(0,b.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-6",children:[2==d?"Want to signup with another email? ":"Already have an account? ",2==d?(0,b.jsx)("span",{className:"hover:cursor-pointer text-primary hover:underline",onClick:()=>{localStorage.setItem("signupStep",1),h(1)},children:"Sign up"}):(0,b.jsx)(e.default,{href:"/login",className:"text-primary hover:underline",children:"Sign in"})]})]})})})});function v(){return(0,b.jsxs)("div",{className:"min-h-screen w-full flex bg-custom-gradient",children:[(0,b.jsx)(d,{}),(0,b.jsx)(u,{})]})}a.s(["default",()=>v],76188)}];

//# sourceMappingURL=components_auth_signup-form_jsx_f8996393._.js.map