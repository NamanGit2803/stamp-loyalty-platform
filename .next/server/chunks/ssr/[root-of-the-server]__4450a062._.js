module.exports=[43285,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/dynamic-access-async-storage.external.js",()=>require("next/dist/server/app-render/dynamic-access-async-storage.external.js"))},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e({error:a}){if(d){let b=d.getStore();if(b?.isStaticGeneration)throw a&&console.error(a),a}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(51234),f={fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},g={fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"},h=function({error:a}){let b=a?.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:a}),(0,d.jsx)("div",{style:f,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:g,children:["Application error: a ",b?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",b?"server logs":"browser console"," for more information)."]}),b?(0,d.jsx)("p",{style:g,children:`Digest: ${b}`}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73140,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(10333);let e={userStore:new class{user=null;shopId=null;loading=!1;error=null;signupStep=1;otpModalOpen=!1;otpEmail="";otpPurpose="";otpVerified=!1;otpResolver=null;redirectAfterOtp=null;hydrated=!1;constructor(){(0,d.makeAutoObservable)(this,{},{autoBind:!0})}async loadInitialUser(){try{let a=await fetch("/api/auth/findUser",{method:"GET",credentials:"include"});if(!a.ok)return;let b=await a.json();(0,d.runInAction)(()=>{this.user=b.user,this.shopId=b.user?.shopId??null})}catch(a){console.error("User load failed:",a)}}async userSignup(a){this.loading=!0,this.error=null;try{let b=await fetch("/api/auth/signup/userCreate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c.error);(0,d.runInAction)(()=>{this.user=c.user})}catch(a){(0,d.runInAction)(()=>this.error=a.message)}finally{this.loading=!1}}async login(a){this.loading=!0,this.error=null;try{let b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c.error);(0,d.runInAction)(()=>{this.user=c.user,this.shopId=c.shopId})}catch(a){(0,d.runInAction)(()=>this.error=a.message)}finally{this.loading=!1}}async updateProfile(a){this.loading=!0,this.error=null;try{let b=await fetch("/api/shop/user/updateUserDetails",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(b.ok)return(0,d.runInAction)(()=>{this.user=c.user}),"Profile updated successfully!";throw Error(c.error||"Failed to update profile")}catch(a){(0,d.runInAction)(()=>{this.error=a.message})}finally{this.loading=!1}}async logout(){await fetch("/api/user/logout",{method:"POST"}),(0,d.runInAction)(()=>{this.user=null,this.shopId=null})}setSignupStep(a){this.signupStep=a}async requestOtp(a,b,c=null){this.loading=!0,this.error=null;try{let e=await fetch("/api/auth/otp/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,purpose:b})}),f=await e.json();if(!e.ok)throw Error(f.error);(0,d.runInAction)(()=>{this.otpEmail=a,this.otpPurpose=b,this.redirectAfterOtp=c,this.otpModalOpen=!0,this.otpVerified=!1})}catch(a){(0,d.runInAction)(()=>this.error=a.message)}finally{this.loading=!1}}waitForOtp(){return new Promise(a=>{this.otpResolver=a})}closeOtp(){this.otpModalOpen=!1,this.error=null}async verifyOtp(a){this.loading=!0,this.error=null;try{let b=await fetch("/api/auth/otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.otpEmail,code:a,purpose:this.otpPurpose})}),c=await b.json();if(!b.ok)throw Error(c.error);return(0,d.runInAction)(()=>{this.otpVerified=!0,this.otpModalOpen=!1}),this.otpResolver&&(this.otpResolver(!0),this.otpResolver=null),!0}catch(a){return(0,d.runInAction)(()=>this.error=a.message),!1}finally{this.loading=!1}}},shopStore:new class{shop=null;subscription=null;subscriptionStatus="";daysLeft=null;loading=!1;error=null;hydrated=!1;constructor(){(0,d.makeAutoObservable)(this,{},{autoBind:!0})}async loadInitial(){this.loading=!0;try{let a=await fetch("/api/auth/findShop",{method:"GET",credentials:"include"}),b=await a.json();if(401===a.status||!b.shop)return void(0,d.runInAction)(()=>{this.shop=null,this.subscription=null,this.subscriptionStatus="NONE"});(0,d.runInAction)(()=>{this.shop=b.shop}),await this.loadSubscription()}catch(a){(0,d.runInAction)(()=>{this.error=a.message,this.shop=null,this.subscription=null,this.subscriptionStatus="NONE"})}finally{this.loading=!1}}async loadSubscription(){if(this.shop?.id)try{let a=await fetch("/api/subscription/status",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:this.shop.id})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to load subscription");(0,d.runInAction)(()=>{this.subscription=b.subscription,this.subscriptionStatus=b.subscription.status||"NONE",this.daysLeft=this.calculateDaysLeft(b.subscription)})}catch(a){(0,d.runInAction)(()=>{this.error=a.message,this.subscription=null,this.subscriptionStatus="NONE",this.daysLeft=null})}}calculateDaysLeft(a){if(!a)return null;let b=a.trialEndsAt||a.nextBillingAt;return b?Math.ceil((new Date(b)-new Date)/864e5):null}async createShop(a){this.loading=!0,this.error=null;try{let b=await fetch("/api/auth/signup/shopCreate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c.error);(0,d.runInAction)(()=>{this.shop=c.newShop})}catch(a){(0,d.runInAction)(()=>this.error=a.message)}finally{this.loading=!1}}async startTrial(){if(this.shop){this.loading=!0,this.error=null;try{let a=await fetch("/api/subscription/start",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:this.shop.id})}),b=await a.json();if(409===a.status)return void(0,d.runInAction)(()=>this.error=b.error);if(!a.ok)throw Error(b.error);await this.loadSubscription()}catch(a){(0,d.runInAction)(()=>this.error=a.message)}finally{this.loading=!1}}}}},f=(0,c.createContext)(e);a.s(["StoreProvider",0,({children:a})=>(0,b.jsx)(f.Provider,{value:e,children:a}),"useStore",0,()=>(0,c.useContext)(f)],73140)},7379,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e="horizontal",f=["horizontal","vertical"],g=c.forwardRef((a,c)=>{var g;let{decorative:h,orientation:i=e,...j}=a,k=(g=i,f.includes(g))?i:e;return(0,b.jsx)(d.Primitive.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});g.displayName="Separator";var h=a.i(97895);function i({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(g,{"data-slot":"separator",decorative:d,orientation:c,className:(0,h.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}a.s(["Separator",()=>i],7379)},22262,a=>{"use strict";var b=a.i(62213);a.s(["XIcon",()=>b.default])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},65733,a=>{"use strict";var b=a.i(87924),c=a.i(97942),d=a.i(22262),e=a.i(97895);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function m({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>m,"DialogHeader",()=>k,"DialogTitle",()=>l,"DialogTrigger",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4450a062._.js.map