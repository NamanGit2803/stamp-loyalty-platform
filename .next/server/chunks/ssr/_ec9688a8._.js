module.exports=[54161,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},21205,a=>{"use strict";var b=a.i(87924),c=a.i(5522);let d=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var e=a.i(33508);function f({value:a,onChange:f,placeholder:g="Search..."}){return(0,b.jsx)("div",{className:"w-sm",children:(0,b.jsxs)("div",{className:"relative bg-background",children:[(0,b.jsx)(d,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(c.Input,{value:a,onChange:a=>f(a.target.value),placeholder:g,className:"pl-9 pr-9"}),a&&(0,b.jsx)("button",{type:"button",onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:(0,b.jsx)(e.X,{className:"h-4 w-4"})})]})})}a.s(["SearchBar",()=>f],21205)},55409,a=>{"use strict";var b=a.i(72131);function c(a,d=500){let[e,f]=(0,b.useState)(a);return(0,b.useEffect)(()=>{let b=setTimeout(()=>{f(a)},d);return()=>clearTimeout(b)},[a,d]),e}a.s(["useDebounce",()=>c])},88346,a=>{"use strict";var b=a.i(87924);a.i(12180);var c=a.i(12530),d=a.i(73140),e=a.i(87682),f=a.i(40695);let g=(0,c.observer)(({page:a,setPage:c})=>{let{shopStore:g}=(0,d.useStore)();return(0,b.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",g.pagination?.totalPages," — ",g.pagination?.total," items"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Rows:"}),(0,b.jsxs)(e.Select,{value:String(g.pagination?.limit||10),onValueChange:a=>{g.pagination.limit=Number(a),c(1)},children:[(0,b.jsx)(e.SelectTrigger,{className:"w-[80px]",children:(0,b.jsx)(e.SelectValue,{})}),(0,b.jsxs)(e.SelectContent,{children:[(0,b.jsx)(e.SelectItem,{value:"10",children:"10"}),(0,b.jsx)(e.SelectItem,{value:"20",children:"20"}),(0,b.jsx)(e.SelectItem,{value:"50",children:"50"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{disabled:1===a,onClick:()=>c(a-1),children:"Prev"}),(0,b.jsx)(f.Button,{disabled:a===g.pagination?.totalPages,onClick:()=>c(a+1),children:"Next"})]})]})]})});a.s(["default",0,g])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardFooter",()=>h,"CardHeader",()=>e,"CardTitle",()=>f])},88466,a=>{"use strict";var b=a.i(87924);let c=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=a.i(97895);function e({className:a,...e}){return(0,b.jsx)(c,{role:"status","aria-label":"Loading",className:(0,d.cn)("size-4 animate-spin",a),...e})}a.s(["Spinner",()=>e],88466)},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},33508,a=>{"use strict";var b=a.i(62213);a.s(["X",()=>b.default])},10617,a=>{"use strict";function b(a,c=!1){if(!a)return"-";let d=new Date(a),e=new Date,f=new Date(d.getFullYear(),d.getMonth(),d.getDate()),g=Math.floor((new Date(e.getFullYear(),e.getMonth(),e.getDate())-f)/864e5);if(!1==c){if(0===g)return"Today";if(1===g)return"Yesterday";if(g>1&&g<7)return`${g} days ago`}return d.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}function c(a){return new Date(a).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(","," •").toUpperCase()}a.s(["FormatLastVisit",()=>b,"FormatToIST",()=>c])},88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},5094,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50104),e=a.i(70121),f=a.i(97942),g=a.i(7554),h=a.i(11011),i="AlertDialog",[j,k]=(0,d.createContextScope)(i,[f.createDialogScope]),l=(0,f.createDialogScope)(),m=a=>{let{__scopeAlertDialog:c,...d}=a,e=l(c);return(0,b.jsx)(f.Root,{...e,...d,modal:!0})};m.displayName=i;var n=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,g=l(d);return(0,b.jsx)(f.Trigger,{...g,...e,ref:c})});n.displayName="AlertDialogTrigger";var o=a=>{let{__scopeAlertDialog:c,...d}=a,e=l(c);return(0,b.jsx)(f.Portal,{...e,...d})};o.displayName="AlertDialogPortal";var p=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,g=l(d);return(0,b.jsx)(f.Overlay,{...g,...e,ref:c})});p.displayName="AlertDialogOverlay";var q="AlertDialogContent",[r,s]=j(q),t=c.forwardRef((a,d)=>{let{__scopeAlertDialog:i,children:j,...k}=a,m=l(i),n=c.useRef(null),o=(0,e.useComposedRefs)(d,n),p=c.useRef(null);return(0,b.jsx)(f.WarningProvider,{contentName:q,titleName:u,docsSlug:"alert-dialog",children:(0,b.jsx)(r,{scope:i,cancelRef:p,children:(0,b.jsxs)(f.Content,{role:"alertdialog",...m,...k,ref:o,onOpenAutoFocus:(0,g.composeEventHandlers)(k.onOpenAutoFocus,a=>{a.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,b.jsx)(h.Slottable,{children:j}),(0,b.jsx)(B,{contentRef:n})]})})})});t.displayName=q;var u="AlertDialogTitle",v=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,g=l(d);return(0,b.jsx)(f.Title,{...g,...e,ref:c})});v.displayName=u;var w="AlertDialogDescription",x=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,g=l(d);return(0,b.jsx)(f.Description,{...g,...e,ref:c})});x.displayName=w;var y=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,g=l(d);return(0,b.jsx)(f.Close,{...g,...e,ref:c})});y.displayName="AlertDialogAction";var z="AlertDialogCancel",A=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...g}=a,{cancelRef:h}=s(z,d),i=l(d),j=(0,e.useComposedRefs)(c,h);return(0,b.jsx)(f.Close,{...i,...g,ref:j})});A.displayName=z;var B=({contentRef:a})=>{let b=`\`${q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${q}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},C=a.i(97895),D=a.i(40695);function E({...a}){return(0,b.jsx)(m,{"data-slot":"alert-dialog",...a})}function F({...a}){return(0,b.jsx)(n,{"data-slot":"alert-dialog-trigger",...a})}function G({...a}){return(0,b.jsx)(o,{"data-slot":"alert-dialog-portal",...a})}function H({className:a,...c}){return(0,b.jsx)(p,{"data-slot":"alert-dialog-overlay",className:(0,C.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function I({className:a,...c}){return(0,b.jsxs)(G,{children:[(0,b.jsx)(H,{}),(0,b.jsx)(t,{"data-slot":"alert-dialog-content",className:(0,C.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c})]})}function J({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,C.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function K({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,C.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function L({className:a,...c}){return(0,b.jsx)(v,{"data-slot":"alert-dialog-title",className:(0,C.cn)("text-lg font-semibold",a),...c})}function M({className:a,...c}){return(0,b.jsx)(x,{"data-slot":"alert-dialog-description",className:(0,C.cn)("text-muted-foreground text-sm",a),...c})}function N({className:a,...c}){return(0,b.jsx)(y,{className:(0,C.cn)((0,D.buttonVariants)(),a),...c})}function O({className:a,...c}){return(0,b.jsx)(A,{className:(0,C.cn)((0,D.buttonVariants)({variant:"outline"}),a),...c})}a.s(["AlertDialog",()=>E,"AlertDialogAction",()=>N,"AlertDialogCancel",()=>O,"AlertDialogContent",()=>I,"AlertDialogDescription",()=>M,"AlertDialogFooter",()=>K,"AlertDialogHeader",()=>J,"AlertDialogTitle",()=>L,"AlertDialogTrigger",()=>F],5094)},13163,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(21205);a.i(12180);var f=a.i(12530),g=a.i(73140),h=a.i(88237),i=a.i(3130),j=a.i(5094),k=a.i(23292);let l=(0,f.observer)(({customerId:a,customerName:c})=>{let{shopStore:e}=(0,g.useStore)(),f=async()=>{a?(await e.redeemReward(a),e.error||k.toast.success("Reward redeemed successfully.")):k.toast.error("Customer Id invalid!")};return(0,b.jsxs)(j.AlertDialog,{children:[(0,b.jsx)(j.AlertDialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{size:"sm",children:"Redeem"})}),(0,b.jsxs)(j.AlertDialogContent,{children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Redeem reward?"}),(0,b.jsxs)(j.AlertDialogDescription,{children:["Redeem this reward for the customer ",(0,b.jsx)("span",{className:"capitalize text-primary font-semibold",children:c}),". This action cannot be undone."]})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(j.AlertDialogAction,{onClick:f,disabled:e.loading,children:e.loading?"Redeeming":"Confirm Redeem"})]})]})]})}),m=(0,a.i(70106).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var n=a.i(54161),o=a.i(89099),p=a.i(10617),q=a.i(88466);let r=({customers:a,loading:c})=>(0,b.jsxs)(i.Card,{className:"overflow-hidden card",children:[c&&(0,b.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,b.jsx)(q.Spinner,{className:"h-6 w-6 text-primary"})}),!c&&(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{className:"bg-muted/40 sticky top-0 z-10",children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{className:"text-primary",children:"Customer"}),(0,b.jsx)(h.TableHead,{className:"text-primary",children:"Mobile"}),(0,b.jsx)(h.TableHead,{className:"text-center text-primary",children:"Stamps"}),(0,b.jsx)(h.TableHead,{className:"text-center text-primary",children:"Visits"}),(0,b.jsx)(h.TableHead,{className:"text-primary",children:"Last Visit"}),(0,b.jsx)(h.TableHead,{className:"text-primary",children:"Reward"}),(0,b.jsx)(h.TableHead,{className:"w-10"})]})}),(0,b.jsx)(h.TableBody,{children:a?.map(a=>(0,b.jsxs)(h.TableRow,{className:"hover:bg-muted/30 transition-colors",children:[(0,b.jsx)(h.TableCell,{className:"py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-semibold",children:a.name?a.name[0]:""}),(0,b.jsx)("span",{className:"font-medium capitalize",children:a.name||"Unkown"})]})}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground py-3",children:"+91 "+a.phone}),(0,b.jsx)(h.TableCell,{className:"text-center py-3",children:(0,b.jsx)(n.Badge,{variant:"default",className:"rounded-full px-2 py-0.5",children:a.stampCount})}),(0,b.jsx)(h.TableCell,{className:"text-center py-3",children:a.totalVisits}),(0,b.jsx)(h.TableCell,{className:"text-muted-foreground py-3",children:(0,p.FormatLastVisit)(a.lastVisit)}),(0,b.jsx)(h.TableCell,{className:"py-3 flex gap-1",children:a.stampCount>=o.shopStore.shop?.targetStamps?(0,b.jsx)(l,{customerId:a.id,customerName:a.name}):(0,b.jsx)(n.Badge,{variant:"default",className:"bg-gray-200 text-dark-text py-1",children:"Not Eligible"})}),(0,b.jsx)(h.TableCell,{className:"text-right py-3",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(m,{size:16})})})]},a.id))})]}),!c&&a?.length===0&&(0,b.jsx)("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"No customers found"})]});var s=a.i(55409),t=a.i(88346);let u=(0,f.observer)(()=>{let{shopStore:a}=(0,g.useStore)(),[d,f]=(0,c.useState)(""),[h,i]=(0,c.useState)(1),[j,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a.resetPagination()},[]);let m=(0,s.useDebounce)(d,500);return(0,c.useEffect)(()=>{(async()=>{if(l(!0),await a.fetchCustomers({page:h,search:m}),l(!1),a.error)return k.toast.error(a.error)})()},[h,a.pagination?.limit,m]),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.SearchBar,{value:d,onChange:a=>f(a),placeholder:"Search by name or phone..."}),(0,b.jsx)(r,{customers:a.customers,loading:j}),(0,b.jsx)(t.default,{page:h,setPage:i})]})});a.s(["default",0,u],13163)}];

//# sourceMappingURL=_ec9688a8._.js.map