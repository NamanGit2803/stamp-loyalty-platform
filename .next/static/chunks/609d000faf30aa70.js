(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var t=e.i(43476),a=e.i(91918),r=e.i(25913),s=e.i(47163);let l=(0,r.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,asChild:i=!1,...n}){let o=i?a.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,s.cn)(l({variant:r}),e),...n})}e.s(["Badge",()=>i])},37727,e=>{"use strict";var t=e.i(41947);e.s(["X",()=>t.default])},34905,e=>{"use strict";function t(e,a=!1){if(!e)return"-";let r=new Date(e),s=new Date,l=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=Math.floor((new Date(s.getFullYear(),s.getMonth(),s.getDate())-l)/864e5);if(!1==a){if(0===i)return"Today";if(1===i)return"Yesterday";if(i>1&&i<7)return`${i} days ago`}return r.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}function a(e){return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(","," •").toUpperCase()}e.s(["FormatLastVisit",()=>t,"FormatToIST",()=>a])},47627,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function s({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function l({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function i({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function n({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function o({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>s,"TableRow",()=>i])},95775,e=>{"use strict";var t=e.i(43476),a=e.i(23750);let r=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var s=e.i(37727);function l({value:e,onChange:l,placeholder:i="Search..."}){return(0,t.jsx)("div",{className:"w-sm",children:(0,t.jsxs)("div",{className:"relative bg-background",children:[(0,t.jsx)(r,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(a.Input,{value:e,onChange:e=>l(e.target.value),placeholder:i,className:"pl-9 pr-9"}),e&&(0,t.jsx)("button",{type:"button",onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:(0,t.jsx)(s.X,{className:"h-4 w-4"})})]})})}e.s(["SearchBar",()=>l],95775)},88997,e=>{"use strict";var t=e.i(71645);function a(e,r=500){let[s,l]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let t=setTimeout(()=>{l(e)},r);return()=>clearTimeout(t)},[e,r]),s}e.s(["useDebounce",()=>a])},97447,e=>{"use strict";var t=e.i(43476);e.i(71470);var a=e.i(41721),r=e.i(41019),s=e.i(62870),l=e.i(67881);let i=(0,a.observer)(({page:e,setPage:a})=>{let{shopStore:i}=(0,r.useStore)();return(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",e," of ",i.pagination?.totalPages," — ",i.pagination?.total," items"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Rows:"}),(0,t.jsxs)(s.Select,{value:String(i.pagination?.limit||10),onValueChange:e=>{i.pagination.limit=Number(e),a(1)},children:[(0,t.jsx)(s.SelectTrigger,{className:"w-[80px]",children:(0,t.jsx)(s.SelectValue,{})}),(0,t.jsxs)(s.SelectContent,{children:[(0,t.jsx)(s.SelectItem,{value:"10",children:"10"}),(0,t.jsx)(s.SelectItem,{value:"20",children:"20"}),(0,t.jsx)(s.SelectItem,{value:"50",children:"50"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{disabled:1===e,onClick:()=>a(e-1),children:"Prev"}),(0,t.jsx)(l.Button,{disabled:e===i.pagination?.totalPages,onClick:()=>a(e+1),children:"Next"})]})]})]})});e.s(["default",0,i])},30009,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(30030),s=e.i(20783),l=e.i(26999),i=e.i(81140),n=e.i(91918),o="AlertDialog",[c,d]=(0,r.createContextScope)(o,[l.createDialogScope]),u=(0,l.createDialogScope)(),m=e=>{let{__scopeAlertDialog:a,...r}=e,s=u(a);return(0,t.jsx)(l.Root,{...s,...r,modal:!0})};m.displayName=o;var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=u(r);return(0,t.jsx)(l.Trigger,{...i,...s,ref:a})});x.displayName="AlertDialogTrigger";var g=e=>{let{__scopeAlertDialog:a,...r}=e,s=u(a);return(0,t.jsx)(l.Portal,{...s,...r})};g.displayName="AlertDialogPortal";var f=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=u(r);return(0,t.jsx)(l.Overlay,{...i,...s,ref:a})});f.displayName="AlertDialogOverlay";var p="AlertDialogContent",[h,b]=c(p),j=a.forwardRef((e,r)=>{let{__scopeAlertDialog:o,children:c,...d}=e,m=u(o),x=a.useRef(null),g=(0,s.useComposedRefs)(r,x),f=a.useRef(null);return(0,t.jsx)(l.WarningProvider,{contentName:p,titleName:v,docsSlug:"alert-dialog",children:(0,t.jsx)(h,{scope:o,cancelRef:f,children:(0,t.jsxs)(l.Content,{role:"alertdialog",...m,...d,ref:g,onOpenAutoFocus:(0,i.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(n.Slottable,{children:c}),(0,t.jsx)(A,{contentRef:x})]})})})});j.displayName=p;var v="AlertDialogTitle",y=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=u(r);return(0,t.jsx)(l.Title,{...i,...s,ref:a})});y.displayName=v;var N="AlertDialogDescription",w=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=u(r);return(0,t.jsx)(l.Description,{...i,...s,ref:a})});w.displayName=N;var D=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=u(r);return(0,t.jsx)(l.Close,{...i,...s,ref:a})});D.displayName="AlertDialogAction";var T="AlertDialogCancel",C=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:n}=b(T,r),o=u(r),c=(0,s.useComposedRefs)(a,n);return(0,t.jsx)(l.Close,{...o,...i,ref:c})});C.displayName=T;var A=({contentRef:e})=>{let t=`\`${p}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${p}\` by passing a \`${N}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${p}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},S=e.i(47163),R=e.i(67881);function k({...e}){return(0,t.jsx)(m,{"data-slot":"alert-dialog",...e})}function B({...e}){return(0,t.jsx)(x,{"data-slot":"alert-dialog-trigger",...e})}function H({...e}){return(0,t.jsx)(g,{"data-slot":"alert-dialog-portal",...e})}function z({className:e,...a}){return(0,t.jsx)(f,{"data-slot":"alert-dialog-overlay",className:(0,S.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function I({className:e,...a}){return(0,t.jsxs)(H,{children:[(0,t.jsx)(z,{}),(0,t.jsx)(j,{"data-slot":"alert-dialog-content",className:(0,S.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a})]})}function P({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,S.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function V({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,S.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function F({className:e,...a}){return(0,t.jsx)(y,{"data-slot":"alert-dialog-title",className:(0,S.cn)("text-lg font-semibold",e),...a})}function O({className:e,...a}){return(0,t.jsx)(w,{"data-slot":"alert-dialog-description",className:(0,S.cn)("text-muted-foreground text-sm",e),...a})}function E({className:e,...a}){return(0,t.jsx)(D,{className:(0,S.cn)((0,R.buttonVariants)(),e),...a})}function L({className:e,...a}){return(0,t.jsx)(C,{className:(0,S.cn)((0,R.buttonVariants)({variant:"outline"}),e),...a})}e.s(["AlertDialog",()=>k,"AlertDialogAction",()=>E,"AlertDialogCancel",()=>L,"AlertDialogContent",()=>I,"AlertDialogDescription",()=>O,"AlertDialogFooter",()=>V,"AlertDialogHeader",()=>P,"AlertDialogTitle",()=>F,"AlertDialogTrigger",()=>B],30009)},41099,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(67881),s=e.i(95775);e.i(71470);var l=e.i(41721),i=e.i(41019),n=e.i(47627),o=e.i(70065),c=e.i(30009),d=e.i(46696);let u=(0,l.observer)(({customerId:e,customerName:a})=>{let{shopStore:s}=(0,i.useStore)(),l=async()=>{e?(await s.redeemReward(e),s.error||d.toast.success("Reward redeemed successfully.")):d.toast.error("Customer Id invalid!")};return(0,t.jsxs)(c.AlertDialog,{children:[(0,t.jsx)(c.AlertDialogTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{size:"sm",children:"Redeem"})}),(0,t.jsxs)(c.AlertDialogContent,{children:[(0,t.jsxs)(c.AlertDialogHeader,{children:[(0,t.jsx)(c.AlertDialogTitle,{children:"Redeem reward?"}),(0,t.jsxs)(c.AlertDialogDescription,{children:["Redeem this reward for the customer ",(0,t.jsx)("span",{className:"capitalize text-primary font-semibold",children:a}),". This action cannot be undone."]})]}),(0,t.jsxs)(c.AlertDialogFooter,{children:[(0,t.jsx)(c.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(c.AlertDialogAction,{onClick:l,disabled:s.loading,children:s.loading?"Redeeming":"Confirm Redeem"})]})]})]})}),m=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var x=e.i(94179),g=e.i(23156),f=e.i(34905),p=e.i(50216);let h=({customers:e,loading:a})=>(0,t.jsxs)(o.Card,{className:"overflow-hidden card",children:[a&&(0,t.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,t.jsx)(p.Spinner,{className:"h-6 w-6 text-primary"})}),!a&&(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{className:"bg-muted/40 sticky top-0 z-10",children:(0,t.jsxs)(n.TableRow,{children:[(0,t.jsx)(n.TableHead,{className:"text-primary",children:"Customer"}),(0,t.jsx)(n.TableHead,{className:"text-primary",children:"Mobile"}),(0,t.jsx)(n.TableHead,{className:"text-center text-primary",children:"Stamps"}),(0,t.jsx)(n.TableHead,{className:"text-center text-primary",children:"Visits"}),(0,t.jsx)(n.TableHead,{className:"text-primary",children:"Last Visit"}),(0,t.jsx)(n.TableHead,{className:"text-primary",children:"Reward"}),(0,t.jsx)(n.TableHead,{className:"w-10"})]})}),(0,t.jsx)(n.TableBody,{children:e?.map(e=>(0,t.jsxs)(n.TableRow,{className:"hover:bg-muted/30 transition-colors",children:[(0,t.jsx)(n.TableCell,{className:"py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-semibold",children:e.name?e.name[0]:""}),(0,t.jsx)("span",{className:"font-medium capitalize",children:e.name||"Unkown"})]})}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground py-3",children:"+91 "+e.phone}),(0,t.jsx)(n.TableCell,{className:"text-center py-3",children:(0,t.jsx)(x.Badge,{variant:"default",className:"rounded-full px-2 py-0.5",children:e.stampCount})}),(0,t.jsx)(n.TableCell,{className:"text-center py-3",children:e.totalVisits}),(0,t.jsx)(n.TableCell,{className:"text-muted-foreground py-3",children:(0,f.FormatLastVisit)(e.lastVisit)}),(0,t.jsx)(n.TableCell,{className:"py-3 flex gap-1",children:e.stampCount>=g.shopStore.shop?.targetStamps?(0,t.jsx)(u,{customerId:e.id,customerName:e.name}):(0,t.jsx)(x.Badge,{variant:"default",className:"bg-gray-200 text-dark-text py-1",children:"Not Eligible"})}),(0,t.jsx)(n.TableCell,{className:"text-right py-3",children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(m,{size:16})})})]},e.id))})]}),!a&&e?.length===0&&(0,t.jsx)("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"No customers found"})]});var b=e.i(88997),j=e.i(97447);let v=(0,l.observer)(()=>{let{shopStore:e}=(0,i.useStore)(),[r,l]=(0,a.useState)(""),[n,o]=(0,a.useState)(1),[c,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e.resetPagination()},[]);let m=(0,b.useDebounce)(r,500);return(0,a.useEffect)(()=>{(async()=>{if(u(!0),await e.fetchCustomers({page:n,search:m}),u(!1),e.error)return d.toast.error(e.error)})()},[n,e.pagination?.limit,m]),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.SearchBar,{value:r,onChange:e=>l(e),placeholder:"Search by name or phone..."}),(0,t.jsx)(h,{customers:e.customers,loading:c}),(0,t.jsx)(j.default,{page:n,setPage:o})]})});e.s(["default",0,v],41099)}]);