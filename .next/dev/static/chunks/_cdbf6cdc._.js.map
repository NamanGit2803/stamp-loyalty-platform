{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Project%20Files/Earning-model/stamp-card-project/stamp-loyalty-platform/stores/userStore.js"],"sourcesContent":["'use client'\r\n\r\nimport { makeAutoObservable, runInAction } from \"mobx\";\r\n\r\nclass UserStore {\r\n    user = null;\r\n    token = null;\r\n    role = null;\r\n    isLoggedIn = false;\r\n    error = null;\r\n    loading = false;\r\n\r\n    constructor() {\r\n        makeAutoObservable(this);\r\n        this.loadFromStorage();\r\n    }\r\n\r\n    \r\n    // SAVE SESSION\r\n    setSession(user, token) {\r\n        this.user = user;\r\n        this.token = token;\r\n\r\n        // Persist in localStorage\r\n        localStorage.setItem(\"user\", token);\r\n    }\r\n\r\n    // SignUp \r\n    async userSignup(formData) {\r\n        this.loading = true\r\n        this.error = null\r\n        try {\r\n            const res = await fetch(\"/api/auth/signup/userCreate\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(formData),\r\n            })\r\n            const data = await res.json()\r\n\r\n            if (!res.ok) throw new Error(data.error || \"Registration failed\")\r\n\r\n            runInAction(() => {\r\n                this.setSession(data.user, data.token)\r\n            })\r\n        } catch (err) {\r\n            runInAction(() => {\r\n                this.error = err.message\r\n            })\r\n        } finally {\r\n            this.loading = false\r\n        }\r\n    }\r\n\r\n\r\n    // LOAD SESSION ON PAGE REFRESH\r\n    loadFromStorage() {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const storedUser = localStorage.getItem(\"user\");\r\n        const storedToken = localStorage.getItem(\"token\");\r\n\r\n        if (storedUser && storedToken) {\r\n            this.user = JSON.parse(storedUser);\r\n            this.token = storedToken;\r\n            this.role = this.user.role;\r\n            this.isLoggedIn = true;\r\n        }\r\n    }\r\n\r\n    // LOGIN\r\n    async login(email, password) {\r\n        const res = await fetch(\"/api/auth/login\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ email, password }),\r\n        });\r\n\r\n        const data = await res.json();\r\n\r\n        if (!res.ok) throw new Error(data.error);\r\n\r\n        // API returns { user, token }\r\n        this.setSession(data);\r\n        return data;\r\n    }\r\n\r\n\r\n    // LOGOUT\r\n    logout() {\r\n        this.user = null;\r\n        this.token = null;\r\n        this.role = null;\r\n        this.isLoggedIn = false;\r\n\r\n        localStorage.removeItem(\"user\");\r\n        localStorage.removeItem(\"token\");\r\n    }\r\n\r\n\r\n    // CHECK ROLE HELPERS\r\n    get isAdmin() {\r\n        return this.role === \"ADMIN\";\r\n    }\r\n\r\n    get isShop() {\r\n        return this.role === \"SHOP\";\r\n    }\r\n}\r\n\r\nexport const userStore = new UserStore();\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIA,MAAM;IACF,OAAO,KAAK;IACZ,QAAQ,KAAK;IACb,OAAO,KAAK;IACZ,aAAa,MAAM;IACnB,QAAQ,KAAK;IACb,UAAU,MAAM;IAEhB,aAAc;QACV,IAAA,oKAAkB,EAAC,IAAI;QACvB,IAAI,CAAC,eAAe;IACxB;IAGA,eAAe;IACf,WAAW,IAAI,EAAE,KAAK,EAAE;QACpB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,KAAK,GAAG;QAEb,0BAA0B;QAC1B,aAAa,OAAO,CAAC,QAAQ;IACjC;IAEA,UAAU;IACV,MAAM,WAAW,QAAQ,EAAE;QACvB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG;QACb,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,+BAA+B;gBACnD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACzB;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAE3C,IAAA,6JAAW,EAAC;gBACR,IAAI,CAAC,UAAU,CAAC,KAAK,IAAI,EAAE,KAAK,KAAK;YACzC;QACJ,EAAE,OAAO,KAAK;YACV,IAAA,6JAAW,EAAC;gBACR,IAAI,CAAC,KAAK,GAAG,IAAI,OAAO;YAC5B;QACJ,SAAU;YACN,IAAI,CAAC,OAAO,GAAG;QACnB;IACJ;IAGA,+BAA+B;IAC/B,kBAAkB;QACd;;QAEA,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,MAAM,cAAc,aAAa,OAAO,CAAC;QAEzC,IAAI,cAAc,aAAa;YAC3B,IAAI,CAAC,IAAI,GAAG,KAAK,KAAK,CAAC;YACvB,IAAI,CAAC,KAAK,GAAG;YACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI;YAC1B,IAAI,CAAC,UAAU,GAAG;QACtB;IACJ;IAEA,QAAQ;IACR,MAAM,MAAM,KAAK,EAAE,QAAQ,EAAE;QACzB,MAAM,MAAM,MAAM,MAAM,mBAAmB;YACvC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QAC3C;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK;QAEvC,8BAA8B;QAC9B,IAAI,CAAC,UAAU,CAAC;QAChB,OAAO;IACX;IAGA,SAAS;IACT,SAAS;QACL,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,UAAU,GAAG;QAElB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC5B;IAGA,qBAAqB;IACrB,IAAI,UAAU;QACV,OAAO,IAAI,CAAC,IAAI,KAAK;IACzB;IAEA,IAAI,SAAS;QACT,OAAO,IAAI,CAAC,IAAI,KAAK;IACzB;AACJ;AAEO,MAAM,YAAY,IAAI"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///E:/Project%20Files/Earning-model/stamp-card-project/stamp-loyalty-platform/stores/StoreProvider.js"],"sourcesContent":["\"use client\"\r\nimport { createContext, useContext } from \"react\"\r\n\r\n// Import all stores here\r\nimport { userStore } from \"./userStore\"\r\n\r\n// Combine stores in one object\r\nconst store = {\r\n  userStore,\r\n}\r\n\r\n// Create React Context\r\nconst StoreContext = createContext(store)\r\n\r\n// Provider component\r\nexport const StoreProvider = ({ children }) => {\r\n  return (\r\n    <StoreContext.Provider value={store}>\r\n      {children}\r\n    </StoreContext.Provider>\r\n  )\r\n}\r\n\r\n// Hook to use stores anywhere\r\nexport const useStore = () => useContext(StoreContext)\r\n"],"names":[],"mappings":";;;;;;;AACA;AAEA,yBAAyB;AACzB;;;AAJA;;;AAMA,+BAA+B;AAC/B,MAAM,QAAQ;IACZ,WAAA,mIAAS;AACX;AAEA,uBAAuB;AACvB,MAAM,6BAAe,IAAA,8KAAa,EAAC;AAG5B,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE;IACxC,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;kBAC3B;;;;;;AAGP;KANa;AASN,MAAM,WAAW;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAY;GAAxC"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///E:/Project%20Files/Earning-model/stamp-card-project/stamp-loyalty-platform/components/ui/sonner.tsx"],"sourcesContent":["'use client'\n\nimport { useTheme } from 'next-themes'\nimport { Toaster as Sonner, ToasterProps } from 'sonner'\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = 'system' } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps['theme']}\n      className=\"toaster group\"\n      style={\n        {\n          '--normal-bg': 'var(--popover)',\n          '--normal-text': 'var(--popover-foreground)',\n          '--normal-border': 'var(--border)',\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,+JAAQ;IAErC,qBACE,6LAAC,sJAAM;QACL,OAAO;QACP,WAAU;QACV,OACE;YACE,eAAe;YACf,iBAAiB;YACjB,mBAAmB;QACrB;QAED,GAAG,KAAK;;;;;;AAGf;GAjBM;;QACyB,+JAAQ;;;KADjC"}}]
}