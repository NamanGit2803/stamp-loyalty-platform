{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///E:/Project%20Files/Earning-model/stamp-card-project/stamp-loyalty-platform/lib/aiParser.js"],"sourcesContent":["import OpenAI from \"openai\";\r\n\r\nconst client = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,  // ChatGPT key\r\n});\r\n\r\n/**\r\n * Safely extract + repair JSON from LLM output\r\n */\r\nfunction parseLLMJson(raw) {\r\n  if (!raw) throw new Error(\"Empty AI response\");\r\n\r\n  let text = raw\r\n    .trim()\r\n    .replace(/^```json/i, \"\")\r\n    .replace(/^```/, \"\")\r\n    .replace(/```$/, \"\")\r\n    .trim();\r\n\r\n  const start = text.indexOf(\"{\");\r\n  const end = text.lastIndexOf(\"}\");\r\n  if (start === -1 || end === -1) {\r\n    throw new Error(\"No JSON object found\");\r\n  }\r\n\r\n  text = text.slice(start, end + 1);\r\n\r\n  return JSON.parse(\r\n    text\r\n      .replace(/,\\s*}/g, \"}\")\r\n      .replace(/,\\s*]/g, \"]\")\r\n      .replace(/\\n/g, \" \")\r\n      .replace(/\\t/g, \" \")\r\n  );\r\n}\r\n\r\n/**\r\n * MAIN FUNCTION\r\n * Image → ChatGPT-4.1-mini Vision → Structured payment data\r\n */\r\nexport async function parsePaymentScreenshot(imageBase64) {\r\n  if (!imageBase64) throw new Error(\"Image base64 is required\");\r\n\r\n  try {\r\n    const systemPrompt =\r\n      \"You are an OCR + extraction system. Output ONLY valid minified JSON. No text, no explanations.\";\r\n\r\n    const userPrompt = `\r\nExtract payment info from the screenshot.\r\n\r\nRules:\r\n- amount: number or null\r\n- upiId: must contain \"@\"\r\n- utr: alphanumeric 8-25 chars or null\r\n- date: YYYY-MM-DD or null\r\n- app: GPay | PhonePe | Paytm | AmazonPay | UNKNOWN\r\n- fake: true if screenshot looks edited/blurred/cropped\r\n- confidence: 0 to 1\r\n\r\nOutput ONLY:\r\n{\"amount\":null,\"upiId\":null,\"utr\":null,\"date\":null,\"app\":\"UNKNOWN\",\"fake\":false,\"confidence\":0.5}\r\n`;\r\n\r\n    // ChatGPT-4.1-mini Vision request\r\n    const res = await client.chat.completions.create({\r\n      model: \"gpt-4.1-mini\",\r\n      messages: [\r\n        { role: \"system\", content: systemPrompt },\r\n        {\r\n          role: \"user\",\r\n          content: [\r\n            { type: \"input_text\", text: userPrompt },\r\n            {\r\n              type: \"input_image\",\r\n              image_url: `data:image/jpeg;base64,${imageBase64}`,\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      temperature: 0,\r\n      max_tokens: 120,\r\n    });\r\n\r\n    const raw = res.choices[0].message.content;\r\n    const parsed = parseLLMJson(raw);\r\n\r\n    // FINAL NORMALIZED OUTPUT\r\n    return {\r\n      amount: typeof parsed.amount === \"number\" ? parsed.amount : null,\r\n\r\n      upiId:\r\n        typeof parsed.upiId === \"string\" && parsed.upiId.includes(\"@\")\r\n          ? parsed.upiId\r\n          : null,\r\n\r\n      utr:\r\n        typeof parsed.utr === \"string\" &&\r\n        /^[a-zA-Z0-9]{8,25}$/.test(parsed.utr)\r\n          ? parsed.utr\r\n          : null,\r\n\r\n      date:\r\n        typeof parsed.date === \"string\" &&\r\n        /^\\d{4}-\\d{2}-\\d{2}$/.test(parsed.date)\r\n          ? parsed.date\r\n          : null,\r\n\r\n      appDetected: parsed.app || \"UNKNOWN\",\r\n\r\n      isLikelyFake: Boolean(parsed.fake),\r\n\r\n      confidence: Math.min(\r\n        Math.max(\r\n          typeof parsed.confidence === \"number\" ? parsed.confidence : 0.5,\r\n          0\r\n        ),\r\n        1\r\n      ),\r\n    };\r\n  } catch (err) {\r\n    console.error(\"ChatGPT OCR ERROR →\", err);\r\n\r\n    return {\r\n      amount: null,\r\n      upiId: null,\r\n      utr: null,\r\n      date: null,\r\n      appDetected: \"UNKNOWN\",\r\n      isLikelyFake: false,\r\n      confidence: 0,\r\n      aiError: true,\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM,SAAS,IAAI,mLAAM,CAAC;IACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEA;;CAEC,GACD,SAAS,aAAa,GAAG;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAE1B,IAAI,OAAO,IACR,IAAI,GACJ,OAAO,CAAC,aAAa,IACrB,OAAO,CAAC,QAAQ,IAChB,OAAO,CAAC,QAAQ,IAChB,IAAI;IAEP,MAAM,QAAQ,KAAK,OAAO,CAAC;IAC3B,MAAM,MAAM,KAAK,WAAW,CAAC;IAC7B,IAAI,UAAU,CAAC,KAAK,QAAQ,CAAC,GAAG;QAC9B,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,KAAK,KAAK,CAAC,OAAO,MAAM;IAE/B,OAAO,KAAK,KAAK,CACf,KACG,OAAO,CAAC,UAAU,KAClB,OAAO,CAAC,UAAU,KAClB,OAAO,CAAC,OAAO,KACf,OAAO,CAAC,OAAO;AAEtB;AAMO,eAAe,uBAAuB,WAAW;IACtD,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;IAElC,IAAI;QACF,MAAM,eACJ;QAEF,MAAM,aAAa,CAAC;;;;;;;;;;;;;;AAcxB,CAAC;QAEG,kCAAkC;QAClC,MAAM,MAAM,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YAC/C,OAAO;YACP,UAAU;gBACR;oBAAE,MAAM;oBAAU,SAAS;gBAAa;gBACxC;oBACE,MAAM;oBACN,SAAS;wBACP;4BAAE,MAAM;4BAAc,MAAM;wBAAW;wBACvC;4BACE,MAAM;4BACN,WAAW,CAAC,uBAAuB,EAAE,aAAa;wBACpD;qBACD;gBACH;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,MAAM,MAAM,IAAI,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO;QAC1C,MAAM,SAAS,aAAa;QAE5B,0BAA0B;QAC1B,OAAO;YACL,QAAQ,OAAO,OAAO,MAAM,KAAK,WAAW,OAAO,MAAM,GAAG;YAE5D,OACE,OAAO,OAAO,KAAK,KAAK,YAAY,OAAO,KAAK,CAAC,QAAQ,CAAC,OACtD,OAAO,KAAK,GACZ;YAEN,KACE,OAAO,OAAO,GAAG,KAAK,YACtB,sBAAsB,IAAI,CAAC,OAAO,GAAG,IACjC,OAAO,GAAG,GACV;YAEN,MACE,OAAO,OAAO,IAAI,KAAK,YACvB,sBAAsB,IAAI,CAAC,OAAO,IAAI,IAClC,OAAO,IAAI,GACX;YAEN,aAAa,OAAO,GAAG,IAAI;YAE3B,cAAc,QAAQ,OAAO,IAAI;YAEjC,YAAY,KAAK,GAAG,CAClB,KAAK,GAAG,CACN,OAAO,OAAO,UAAU,KAAK,WAAW,OAAO,UAAU,GAAG,KAC5D,IAEF;QAEJ;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QAErC,OAAO;YACL,QAAQ;YACR,OAAO;YACP,KAAK;YACL,MAAM;YACN,aAAa;YACb,cAAc;YACd,YAAY;YACZ,SAAS;QACX;IACF;AACF"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///E:/Project%20Files/Earning-model/stamp-card-project/stamp-loyalty-platform/app/api/screenshot/verify/route.js"],"sourcesContent":["export const runtime = \"nodejs\";\r\n\r\nimport { NextResponse } from \"next/server\";\r\nimport crypto from \"crypto\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { parsePaymentScreenshot } from \"@/lib/aiParser\";\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n/** SHA256 hash generator */\r\nfunction sha256(buffer) {\r\n    return crypto.createHash(\"sha256\").update(buffer).digest(\"hex\");\r\n}\r\n\r\nexport async function POST(req) {\r\n    try {\r\n        const formData = await req.formData();\r\n\r\n        const file = formData.get(\"file\");\r\n        const shopId = formData.get(\"shopId\");\r\n        const phone = formData.get(\"phone\");\r\n        const ocrJson = formData.get(\"ocrResult\");\r\n\r\n        if (!file || !shopId || !ocrJson || !phone) {\r\n            return NextResponse.json(\r\n                { error: \"Missing required fields\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const clientOCR = JSON.parse(ocrJson);\r\n        const { text: rawText } = clientOCR;\r\n\r\n        // --------------------------------------\r\n        // 2️⃣ HASH ORIGINAL IMAGE (True Duplicate Prevention)\r\n        // --------------------------------------\r\n        const bytes = await file.arrayBuffer();\r\n        const buffer = Buffer.from(bytes);\r\n        const screenshotHash = sha256(buffer);\r\n\r\n        \r\n        // --------------------------------------\r\n        // 3️⃣ FETCH SHOP\r\n        // --------------------------------------\r\n        const shop = await prisma.shop.findUnique({ where: { id: shopId } });\r\n        if (!shop) {\r\n            return NextResponse.json(\r\n                { error: \"Invalid shopId\" },\r\n                { status: 404 }\r\n            );\r\n        }\r\n\r\n\r\n        // --------------------------------------\r\n        // 4️⃣ CHECK DUPLICATE SCREENSHOT\r\n        // --------------------------------------\r\n        const duplicate = await prisma.scanVerification.findFirst({\r\n            where: { shopId, screenshotHash },\r\n        });\r\n\r\n        if (duplicate) {\r\n            return NextResponse.json(\r\n                { success: false, rejectReason: \"Duplicate Screenshot\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n\r\n        // --------------------------------------\r\n        // 1️⃣ AI OCR FIX PROCESSING\r\n        // --------------------------------------\r\n        const ai = await parsePaymentScreenshot(file);\r\n\r\n        if (ai.aiError) {\r\n            console.log(\"⚠ AI unavailable — continuing with client OCR only\");\r\n        }\r\n\r\n\r\n        console.log(\"AI FIXED OCR →\", ai);\r\n\r\n        // AI corrected values (fallback to client OCR)\r\n        const amount = ai.amount ?? clientOCR.amount ?? null;\r\n        const upiId = ai.upiId ?? clientOCR.upiId ?? null;\r\n        const utr = ai.utr ?? clientOCR.utr ?? null;\r\n        const appDetected = ai.appDetected ?? \"UNKNOWN\";\r\n        const isLikelyFake = ai.isLikelyFake ?? false;\r\n\r\n        // Validate amount\r\n        if (!amount || isNaN(amount)) {\r\n            return NextResponse.json(\r\n                { success: false, rejectReason: \"ocr_failed_amount\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n\r\n\r\n\r\n        // --------------------------------------\r\n        // 5️⃣ CREATE / FETCH CUSTOMER\r\n        // --------------------------------------\r\n        let customer = await prisma.customer.findFirst({\r\n            where: { shopId, phone },\r\n        });\r\n\r\n        if (!customer) {\r\n            customer = await prisma.customer.create({\r\n                data: {\r\n                    id: `cus_${crypto.randomUUID()}`,\r\n                    shopId,\r\n                    phone,\r\n                },\r\n            });\r\n        }\r\n\r\n        // --------------------------------------\r\n        // 6️⃣ FRAUD CHECKS\r\n        // --------------------------------------\r\n        let rejectReason = null;\r\n\r\n        // AI flagged fake\r\n        if (isLikelyFake) {\r\n            rejectReason = \"suspicious_screenshot\";\r\n        }\r\n\r\n        // UPI mismatch\r\n        if (!rejectReason && shop.upiId && upiId && shop.upiId !== upiId) {\r\n            rejectReason = \"upi_mismatch\";\r\n        }\r\n\r\n        // Minimum amount check\r\n        if (!rejectReason && amount < Number(shop.minAmount || 0)) {\r\n            rejectReason = \"below_minimum\";\r\n        }\r\n\r\n        // Payment status from client OCR (not AI)\r\n        if (!rejectReason && clientOCR.status !== \"success\") {\r\n            rejectReason = \"payment_not_success\";\r\n        }\r\n\r\n        // Duplicate UTR\r\n        if (!rejectReason && utr) {\r\n            const utrExists = await prisma.scanVerification.findFirst({\r\n                where: { shopId, utr },\r\n            });\r\n            if (utrExists) rejectReason = \"duplicate_utr\";\r\n        }\r\n\r\n        // Daily Limit\r\n        if (!rejectReason) {\r\n            const todayCount = await prisma.scanVerification.count({\r\n                where: {\r\n                    shopId,\r\n                    customerId: customer.id,\r\n                    status: \"success\",\r\n                    createdAt: {\r\n                        gte: new Date(new Date().setHours(0, 0, 0, 0)),\r\n                    },\r\n                },\r\n            });\r\n\r\n            if (todayCount >= shop.maxStampsPerCustomerPerDay) {\r\n                rejectReason = \"daily_limit_reached\";\r\n            }\r\n        }\r\n\r\n        // --------------------------------------\r\n        // 7️⃣ SAVE THE VERIFICATION RECORD\r\n        // --------------------------------------\r\n        const scan = await prisma.scanVerification.create({\r\n            data: {\r\n                shopId,\r\n                customerId: customer.id,\r\n                amount,\r\n                currency: \"INR\",\r\n                upiId,\r\n                utr,\r\n                paidAt: new Date(),\r\n                status: rejectReason ? \"rejected\" : \"success\",\r\n                rejectReason,\r\n                screenshotHash,\r\n                appDetected,\r\n                ocrText: rawText,\r\n            },\r\n        });\r\n\r\n        // If failed fraud check → return here\r\n        if (rejectReason) {\r\n            return NextResponse.json(\r\n                { success: false, rejectReason },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // --------------------------------------\r\n        // 8️⃣ AWARD STAMP\r\n        // --------------------------------------\r\n        await prisma.customer.update({\r\n            where: { id: customer.id },\r\n            data: {\r\n                stampCount: { increment: 1 },\r\n                totalVisits: { increment: 1 },\r\n                lastVisit: new Date(),\r\n            },\r\n        });\r\n\r\n        // --------------------------------------\r\n        // 9️⃣ TRANSACTION LOG\r\n        // --------------------------------------\r\n        await prisma.transaction.create({\r\n            data: {\r\n                id: `txn_${crypto.randomUUID()}`,\r\n                shopId,\r\n                customerId: customer.id,\r\n                amount,\r\n                status: \"success\",\r\n                upiId,\r\n                method: \"UPI_SCREENSHOT\",\r\n            },\r\n        });\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            message: \"Stamp added!\",\r\n            scanId: scan.id,\r\n        });\r\n    } catch (err) {\r\n        console.error(\"VERIFY ERROR →\", err);\r\n        return NextResponse.json(\r\n            { error: \"Server Error\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}